
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>EKA2L1 till today (part 1)</title>
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" type="text/css" href="https://pent0.github.io/blog/assets/built/screen.css?v=4f05924638">

    <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon">
    <link rel="canonical" href="index.html">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <link rel="amphtml" href="amp/index.html">
    
    <meta property="og:site_name" content="pent0">
    <meta property="og:type" content="article">
    <meta property="og:title" content="EKA2L1 till today (part 1)">
    <meta property="og:description" content="In New Year's eve (1/1/2019), I got the console UI screen to renders something, using the classic ui framework (Series 60 UI framework). I like to take a small time and records everything from the beginning till today.This blog site will also records things in the future.">
    <meta property="og:url" content="https://pent0.github.io/blog/eka2l1-till-today-p1/">
    <meta property="og:image" content="https://pent0.github.io/blog/content/images/2019/01/HelloWorld1.png">
    <meta property="article:published_time" content="2019-01-05T05:53:09.000Z">
    <meta property="article:modified_time" content="2019-01-05T15:17:42.000Z">
    <meta property="article:tag" content="EKA2L1">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="EKA2L1 till today (part 1)">
    <meta name="twitter:description" content="In New Year's eve (1/1/2019), I got the console UI screen to renders something, using the classic ui framework (Series 60 UI framework). I like to take a small time and records everything from the beginning till today.This blog site will also records things in the future.">
    <meta name="twitter:url" content="https://pent0.github.io/blog/eka2l1-till-today-p1/">
    <meta name="twitter:image" content="https://pent0.github.io/blog/content/images/2019/01/HelloWorld1.png">
    <meta name="twitter:label1" content="Written by">
    <meta name="twitter:data1" content="Do Trong Thu">
    <meta name="twitter:label2" content="Filed under">
    <meta name="twitter:data2" content="EKA2L1">
    <meta name="twitter:site" content="@hgen264">
    <meta property="og:image:width" content="868">
    <meta property="og:image:height" content="225">
    
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "pent0",
        "logo": {
            "@type": "ImageObject",
            "url": "https://pent0.github.io/blog/favicon.ico",
            "width": 60,
            "height": 60
        }
    },
    "author": {
        "@type": "Person",
        "name": "Do Trong Thu",
        "url": "https://pent0.github.io/blog/author/pent0/",
        "sameAs": [
            "https://github.com/eka2l1/eka2l1"
        ]
    },
    "headline": "EKA2L1 till today (part 1)",
    "url": "https://pent0.github.io/blog/eka2l1-till-today-p1/",
    "datePublished": "2019-01-05T05:53:09.000Z",
    "dateModified": "2019-01-05T15:17:42.000Z",
    "image": {
        "@type": "ImageObject",
        "url": "https://pent0.github.io/blog/content/images/2019/01/HelloWorld1.png",
        "width": 868,
        "height": 225
    },
    "keywords": "EKA2L1",
    "description": "In New Year&#x27;s eve (1/1/2019), I got the console UI screen to renders something, using the classic ui framework (Series 60 UI framework). I like to take a small time and records everything from the beginning till today.This blog site will also records things in the future.",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://pent0.github.io/blog/"
    }
}
    </script>

    <script src="https://pent0.github.io/blog/public/ghost-sdk.js?v=4f05924638"></script>
<script>
ghost.init({
	clientId: "ghost-frontend",
	clientSecret: "7f9644b78f19"
});
</script>
    <meta name="generator" content="Ghost 2.9">
    <link rel="alternate" type="application/rss+xml" title="pent0" href="../rss/index.html">

</head>
<body class="post-template tag-eka2l1">

    <div class="site-wrapper">

        

<header class="site-header outer">
    <div class="inner">
        <nav class="site-nav">
    <div class="site-nav-left">
                <a class="site-nav-logo" href="../">pent0</a>
            <ul class="nav" role="menu">
    <li class="nav-home" role="menuitem"><a href="../">Home</a></li>
    <li class="nav-author" role="menuitem"><a href="../author/pent0/">Author</a></li>
    <li class="nav-help" role="menuitem"><a href="https://help.ghost.org">Help</a></li>
</ul>

    </div>
    <div class="site-nav-right">
        <div class="social-links">
                <a class="social-link social-link-tw" href="https://twitter.com/hgen264" title="Twitter" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"></path></svg>
</a>
        </div>
            <a class="rss-button" href="https://feedly.com/i/subscription/feed/https://pent0.github.io/blog/rss/" title="RSS" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><circle cx="6.18" cy="17.82" r="2.18"></circle><path d="M4 4.44v2.83c7.03 0 12.73 5.7 12.73 12.73h2.83c0-8.59-6.97-15.56-15.56-15.56zm0 5.66v2.83c3.9 0 7.07 3.17 7.07 7.07h2.83c0-5.47-4.43-9.9-9.9-9.9z"></path></svg>
</a>
    </div>
</nav>
    </div>
</header>


<main id="site-main" class="site-main outer">
    <div class="inner">

        <article class="post-full post tag-eka2l1 ">

            <header class="post-full-header">
                <section class="post-full-meta">
                    <time class="post-full-meta-date" datetime="2019-01-05">5 January 2019</time>
                        <span class="date-divider">/</span> <a href="../tag/eka2l1/">EKA2L1</a>
                </section>
                <h1 class="post-full-title">EKA2L1 till today (part 1)</h1>
            </header>

            <figure class="post-full-image">
                <img srcset="../content/images/size/w300/2019/01/HelloWorld1.png 300w,
                           ../content/images/size/w600/2019/01/HelloWorld1.png 600w,
                          ../content/images/size/w1000/2019/01/HelloWorld1.png 1000w,
                         ../content/images/size/w2000/2019/01/HelloWorld1.png 2000w" sizes="(max-width: 800px) 400px,
                            (max-width: 1170px) 700px,
                            1400px" src="../content/images/size/w2000/2019/01/HelloWorld1.png" alt="EKA2L1 till today (part 1)">
            </figure>

            <section class="post-full-content">
                <div class="post-content">
                    <p>In New Year's eve (1/1/2019), I got the console UI screen to renders something, using the classic ui framework (Series 60 UI framework). I like to take a small time and records everything from the beginning till today.</p><p>This blog site will also records things in the future.</p><p></p><h1 id="whyitwasborn">Why it was born</h1>
<ul>
<li>The initial idea was started at March of 2018. I was reserving game structure for some Symbian games at that time (<a href="https://www.youtube.com/watch?v=nqKQGSXvaT8&amp;list=PLxLLWUewqijzrQQk1QGJ_bKmABg6vQMeu">Creebies</a>, The Big Roll in Paradise), because these musics would stuck in my mind. I was also contributing to Vita3K at that time to learn more about emulation.</li>
<li>While the Creebies game files structure were easy to detect (I accidently discovered that game music was raw when plays the whole cache file in Audacity), I have no idea how it works in iDream games. I got no patient at looking at IDA and sees function jumping around like a circle either.</li>
<li>At that time I was having an idea of a Symbian emulator. It would helps me track down calls and make it easier at reversing things and extracting stuffs, because I have the whole control of the system in my hand.</li>
<li>I know that there is not one around. The QEmu thing need a custom ROM to be built, but still not giving the thing I want because I have no control or experience working with that QEmu fork, and I don't know if I have the ability to do it or not. If it's usable than there should be people around using it. But I have only seen one ARM engineer shows <a href="https://victorpalau.net/2010/06/29/symbian3-homescreen-running-on-qemu-and-zoom2/">pictures of it running</a>.</li>
<li>I have also sees NGEmu. The fact that it got suspened but no care about really makes me angry (yes, it was really selfish and childish, I ashame of that additute). It urges me to create one, called EKA2L1.</li>
<li>The name is weird. I need a name, and it just comes to my mind. Emulating EKA2 (Epoc Kernel Architecture Ver 2) low level style (LL). But the emulator is HLE... (pssstt).</li>
<li>Everything got started at 22 March of 2018. It was simply a <a href="https://github.com/EKA2L1/EKA2L1/commit/f232b9334a0e10bcecb1ff5a4a4d2e84885c1442">README and license commit</a>.</li>
</ul>
<p>The first real commit start on 27 March. I will takes you through 144 images on the Discord #development channel, which is where I usually mumbles and throws images stuff.</p><figure class="kg-card kg-image-card"><img src="../content/images/2019/01/totalimage.png" class="kg-image"></figure><p><strong>6:07, April 17 2018</strong></p>
<p>I wake up early to go and yet I posted this picture before I go.</p>
<p><img src="https://media.discordapp.net/attachments/431430141319708692/435576513329627137/unknown.png?width=841&amp;height=473" alt="First image on the channel"></p>
<p>It was showing the SIS installer extracting game files (Super miners, an iDream game), and showing the E32 Image Parser in the work. There was no relocation yet. The emulator is just a dumper at that time.</p>
<p><strong>20:35, April 26 2018</strong></p>
<p>I was digging into Symbian source code and figures out how to do relocation right for ELF-image type. First try on the relocation.</p>
<p><img src="https://media.discordapp.net/attachments/431430141319708692/439051654537674754/unknown.png?width=841&amp;height=473" alt="First try on relocation.. Yikes, it doesn't work"></p>
<p>It doesn't work right away, but I got really happy about it. I figure it out myself ^_^</p>
<p>The highlight part read wrong value. It should been in ROM address range.</p>
<p><img src="https://media.discordapp.net/attachments/431430141319708692/439058170263109653/unknown.png?width=841&amp;height=473" alt="It is wrong"></p>
<p><strong>21:48 April 30 2018</strong><br>
I got to implement some API functions. I wasn't choosing the route to implement system calls, but instead implement <em>all API</em> calls. I was intended to resolve it by using hash for each function</p>
<p><img src="https://cdn.discordapp.com/attachments/431430141319708692/440343687575109632/unknown.png" alt="Hash"></p>
<p>Basiclly, when relocation are applied, I will apply the real address, but when the CPU jumps to that real address, instead I will redirect it to HLE function. Each HLE function has a hash applied to it. It wasn't really smart, but I didn't abadon the whole idea.</p>
<p><strong>14:45 May 1 2018</strong><br>
<img src="https://media.discordapp.net/attachments/431430141319708692/440910139189493760/unknown.png?width=841&amp;height=473" alt="Figure"></p>
<p>I wanted to be completely independent from system files in Symbian. Unfortunately, almost every system API involves c++ class and inheritence, which requires vtable. At that point, I decided to do a crazy idea: Rebuild the vtable myself.</p>
<p>That picture is the metadata generator in progress. I was supposed to use it to build a vtable at runtime.</p>
<p><strong>14:45 May 2 2018</strong><br>
<img src="https://media.discordapp.net/attachments/431430141319708692/441143074291187713/unknown.png?width=841&amp;height=473" alt="Finish the generator"></p>
<p>The meta generator is finished. UroshUchia reacts with a love. I'm really sorry to disappoint him (sorry!)</p>
<p><strong>21:18 May 7 2018</strong><br>
I showed the vtable generator in progress. It was really simple at that time, detecting virtual and override, and choosing between others. There was no thunk definition in that at the time.</p>
<p>Also, at that time, I switched to Ubuntu 18.04 and Visual Studio Code</p>
<p><img src="https://media.discordapp.net/attachments/431430141319708692/443053923125690368/unknown.png?width=830&amp;height=474" alt="Vtable Generator in progress"></p>
<p><strong>18:44 May 13 2018</strong><br>
This is where I found out that it also generates RTTI information for each class. My plan screwed up, and I shift to another plan.</p>
<p><img src="https://media.discordapp.net/attachments/431430141319708692/445189705382887426/unknown.png?width=841&amp;height=473" alt="Screwed up"></p>
<p><strong>20:30 May 15 2018</strong><br>
<img src="https://media.discordapp.net/attachments/431430141319708692/445940956181561364/unknown.png?width=486&amp;height=473" alt="Email asking for ROFS"></p>
<p>I shifted to another plan, not HLE all the functions. To do that, I need also original system DLLS that come with the ROM, reside in a read-only file system (ROFS).</p>
<p>To make it easier for users, I was asking for an FPSX reader, to let it easier for user, not to dump system files from their phones.</p>
<p><strong>11:52 May 16 2018</strong><br>
<img src="https://media.discordapp.net/attachments/431430141319708692/446172987478245385/unknown.png?width=841&amp;height=473" alt="No"></p>
<p>This plan was abadoned again, I decide to let user dump the system files in Z drive themself.</p>
<p><strong>20:52 May 18 2018</strong><br>
<img src="https://media.discordapp.net/attachments/431430141319708692/447033909713043466/unknown.png?width=841&amp;height=473" alt="ROM reader"></p>
<p>I begin making the ROM reader. I uses CODERus tool (written is Pascal), comparing with my implementation to make sure nothing goes wrong.</p>
<p><strong>17:20 June 2 2018</strong><br>
I start the work again, this time implement some HLE API calls. I was really happy when the first function was called. It was UserHeap::CreateThreadHeap.</p>
<p>I show that in Discord.</p>
<p><img src="https://media.discordapp.net/attachments/431430141319708692/452416223943065602/unknown.png?width=841&amp;height=474" alt="Hello"></p>
<p>The function are used to create heap for the thread. It's one big step at that time, because this is the first function to be called.</p>
<p>Follow up, here is the implementation. Looks really sastifying.</p>
<p><img src="https://media.discordapp.net/attachments/431430141319708692/452432703971655680/unknown.png?width=841&amp;height=474" alt="Implementation"></p>
<p><strong>10:55 June 4 2018</strong></p>
<p>During IDA reversing, I discovered that the first 0x40 bytes of the stack are used to store thread create parameter. By correcting that, I get the correct create information</p>
<p><img src="https://media.discordapp.net/attachments/431430141319708692/452436662505439232/unknown.png?width=841&amp;height=474" alt="The stack"></p>
<p><img src="https://media.discordapp.net/attachments/431430141319708692/452644647274151936/unknown.png?width=841&amp;height=474" alt="Create information"></p>
<p>Eventually, the first thread was created.</p>
<p><strong>20:31 June 7 2018</strong></p>
<p>Hello world!</p>
<p><img src="https://media.discordapp.net/attachments/431430141319708692/454276090643349504/unknown.png" alt="Hello, world"></p>
<p><img src="../content/images/2019/01/hal.png" alt="hal"></p>
<p>Thanks for reading, if you interested, here is <a href="../eka2l1-till-today-part-2/">Part 2</a></p>
                </div>
            </section>


            <footer class="post-full-footer">


                    
<section class="author-card">
        <span class="avatar-wrapper"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M3.513 18.998C4.749 15.504 8.082 13 12 13s7.251 2.504 8.487 5.998C18.47 21.442 15.417 23 12 23s-6.47-1.558-8.487-4.002zM12 12c2.21 0 4-2.79 4-5s-1.79-4-4-4-4 1.79-4 4 1.79 5 4 5z" fill="#FFF"></path></g></svg>
</span>
    <section class="author-card-content">
        <h4 class="author-card-name"><a href="../author/pent0/">Do Trong Thu</a></h4>
            <p>Read <a href="../author/pent0/">more posts</a> by this author.</p>
    </section>
</section>
<div class="post-full-footer-right">
    <a class="author-card-button" href="../author/pent0/">Read More</a>
</div>


            </footer>


        </article>

    </div>
</main>

<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">
                <article class="read-next-card" style="background-image: url(../content/images/size/w600/2019/03/1024_01-1.gif)">
                    <header class="read-next-card-header">
                        <small class="read-next-card-header-sitetitle">— pent0 —</small>
                        <h3 class="read-next-card-header-title"><a href="../tag/eka2l1/">EKA2L1</a></h3>
                    </header>
                    <div class="read-next-divider"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"></path></svg>
</div>
                    <div class="read-next-card-content">
                        <ul>
                            <li><a href="../eka2l1-till-today-part-3/">EKA2L1 till today (Part 3)</a></li>
                            <li><a href="../eka2l1-till-today-part-2/">EKA2L1 till today (part 2)</a></li>
                        </ul>
                    </div>
                    <footer class="read-next-card-footer">
                        <a href="../tag/eka2l1/">See all 2 posts →</a>
                    </footer>
                </article>

                <article class="post-card post tag-eka2l1 ">

    <a class="post-card-image-link" href="../eka2l1-till-today-part-2/">
        <img class="post-card-image" srcset="../content/images/size/w300/2019/01/haha-1.png 300w,
                   ../content/images/size/w600/2019/01/haha-1.png 600w,
                  ../content/images/size/w1000/2019/01/haha-1.png 1000w,
                 ../content/images/size/w2000/2019/01/haha-1.png 2000w" sizes="(max-width: 1000px) 400px, 700px" src="../content/images/size/w600/2019/01/haha-1.png" alt="EKA2L1 till today (part 2)">
    </a>

    <div class="post-card-content">

        <a class="post-card-content-link" href="../eka2l1-till-today-part-2/">

            <header class="post-card-header">
                    <span class="post-card-tags">EKA2L1</span>
                <h2 class="post-card-title">EKA2L1 till today (part 2)</h2>
            </header>

            <section class="post-card-excerpt">
                <p>When the emulator was started to output something people can count as progress, I starts making a UI of it.You also may notices that I switch development environment to Windows. My laptop</p>
            </section>

        </a>

        <footer class="post-card-meta">

            <ul class="author-list">
                <li class="author-list-item">

                    <div class="author-name-tooltip">
                        Do Trong Thu
                    </div>

                        <a href="../author/pent0/" class="static-avatar author-profile-image"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M3.513 18.998C4.749 15.504 8.082 13 12 13s7.251 2.504 8.487 5.998C18.47 21.442 15.417 23 12 23s-6.47-1.558-8.487-4.002zM12 12c2.21 0 4-2.79 4-5s-1.79-4-4-4-4 1.79-4 4 1.79 5 4 5z" fill="#FFF"></path></g></svg>
</a>
                </li>
            </ul>

            <span class="reading-time">8 min read</span>

        </footer>

    </div>

</article>

                <article class="post-card post ">

    <a class="post-card-image-link" href="../hi-i-have-a-new-blog-system/">
        <img class="post-card-image" srcset="../content/images/size/w300/2019/01/sshot.png 300w,
                   ../content/images/size/w600/2019/01/sshot.png 600w,
                  ../content/images/size/w1000/2019/01/sshot.png 1000w,
                 ../content/images/size/w2000/2019/01/sshot.png 2000w" sizes="(max-width: 1000px) 400px, 700px" src="../content/images/size/w600/2019/01/sshot.png" alt="New blog!">
    </a>

    <div class="post-card-content">

        <a class="post-card-content-link" href="../hi-i-have-a-new-blog-system/">

            <header class="post-card-header">
                <h2 class="post-card-title">New blog!</h2>
            </header>

            <section class="post-card-excerpt">
                <p>Hi, This is the new blog. I only have a screenshot.More coming soon. I will keep my update on this website.</p>
            </section>

        </a>

        <footer class="post-card-meta">

            <ul class="author-list">
                <li class="author-list-item">

                    <div class="author-name-tooltip">
                        Do Trong Thu
                    </div>

                        <a href="../author/pent0/" class="static-avatar author-profile-image"><svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M3.513 18.998C4.749 15.504 8.082 13 12 13s7.251 2.504 8.487 5.998C18.47 21.442 15.417 23 12 23s-6.47-1.558-8.487-4.002zM12 12c2.21 0 4-2.79 4-5s-1.79-4-4-4-4 1.79-4 4 1.79 5 4 5z" fill="#FFF"></path></g></svg>
</a>
                </li>
            </ul>

            <span class="reading-time">1 min read</span>

        </footer>

    </div>

</article>

        </div>
    </div>
</aside>

<div class="floating-header">
    <div class="floating-header-logo">
        <a href="../">
            <span>pent0</span>
        </a>
    </div>
    <span class="floating-header-divider">—</span>
    <div class="floating-header-title">EKA2L1 till today (part 1)</div>
    <div class="floating-header-share">
        <div class="floating-header-share-label">Share this <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24">
    <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"></path>
</svg>
</div>
        <a class="floating-header-share-tw" href="https://twitter.com/share?text=EKA2L1%20till%20today%20(part%201)&amp;url=https://pent0.github.io/blog/eka2l1-till-today-p1/" onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"></path></svg>
        </a>
        <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=https://pent0.github.io/blog/eka2l1-till-today-p1/" onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"></path></svg>
        </a>
    </div>
    <progress id="reading-progress" class="progress" value="0">
        <div class="progress-container">
            <span class="progress-bar"></span>
        </div>
    </progress>
</div>




        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="../">pent0</a> © 2019</section>
                <nav class="site-footer-nav">
                    <a href="../">Latest Posts</a>
                    
                    <a href="https://twitter.com/hgen264" target="_blank" rel="noopener">Twitter</a>
                    <a href="https://ghost.org" target="_blank" rel="noopener">Ghost</a>
                </nav>
            </div>
        </footer>

    </div>


    <script>
        var images = document.querySelectorAll('.kg-gallery-image img');
        images.forEach(function (image) {
            var container = image.closest('.kg-gallery-image');
            var width = image.attributes.width.value;
            var height = image.attributes.height.value;
            var ratio = width / height;
            container.style.flex = ratio + ' 1 0%';
        })
    </script>


    <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous">
    </script>
    <script type="text/javascript" src="https://pent0.github.io/blog/assets/built/jquery.fitvids.js?v=4f05924638"></script>


    <script>

// NOTE: Scroll performance is poor in Safari
// - this appears to be due to the events firing much more slowly in Safari.
//   Dropping the scroll event and using only a raf loop results in smoother
//   scrolling but continuous processing even when not scrolling
$(document).ready(function () {
    // Start fitVids
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    // End fitVids

    var progressBar = document.querySelector('#reading-progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        // show/hide floating header
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();

});
</script>


    

</body>
