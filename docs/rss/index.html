<channel><title></title><description></description><link>http://localhost:2368/<image><url>http://localhost:2368/favicon.png</url><title>pent0</title><link>http://localhost:2368/</image><generator>Ghost 2.9</generator><lastbuilddate>Sat, 05 Jan 2019 08:00:23 GMT</lastbuilddate><link href="http://localhost:2368/rss/" rel="self" type="application/rss+xml"><ttl>60</ttl><item><title></title><description>In New Year's eve (1/1/2019), I got the console UI screen to renders something, using the classic ui framework (Series 60 UI framework). I like to take a small time and records everything from the beginning till today.<p>This blog site will also records things in the future.</p>]]&gt;</description><link>http://localhost:2368/eka2l1-till-today-p1/<guid ispermalink="false">5c3041ced933a223ecf86db2</guid><creator></creator><pubdate>Sat, 05 Jan 2019 05:53:09 GMT</pubdate><content url="http://localhost:2368/content/images/2019/01/HelloWorld1.png" medium="image"></content><encoded><p>In New Year's eve (1/1/2019), I got the console UI screen to renders something, using the classic ui framework (Series 60 UI framework). I like to take a small time and records everything from the beginning till today.</p><p>This blog site will also records things in the future.</p><p></p><h1 id="whyitwasborn">Why it was born</h1>
<ul>
<li>The initial idea was started at March of 2018. I was reserving game structure for some Symbian games at that time (<a href="https://www.youtube.com/watch?v=nqKQGSXvaT8&amp;list=PLxLLWUewqijzrQQk1QGJ_bKmABg6vQMeu">Creebies</a>, The Big Roll in Paradise), because these musics would stuck in my mind. I was also contributing to Vita3K at that time to learn more about emulation.</li>
<li>While the Creebies game files structure were easy to detect (I accidently discovered that game music was raw when plays the whole cache file in Audacity), I have no idea how it works in iDream games. I got no patient at looking at IDA and sees function jumping around like a circle either.</li>
<li>At that time I was having an idea of a Symbian emulator. It would helps me track down calls and make it easier at reversing things and extracting stuffs, because I have the whole control of the system in my hand.</li>
<li>I know that there is not one around. The QEmu thing need a custom ROM to be built, but still not giving the thing I want because I have no control or experience working with that QEmu fork, and I don't know if I have the ability to do it or not. If it's usable than there should be people around using it. But I have only seen one ARM engineer shows <a href="https://victorpalau.net/2010/06/29/symbian3-homescreen-running-on-qemu-and-zoom2/">pictures of it running</a>.</li>
<li>I have also sees NGEmu. The fact that it got suspened but no care about really makes me angry (yes, it was really selfish and childish, I ashame of that additute). It urges me to create one, called EKA2L1.</li>
<li>The name is weird. I need a name, and it just comes to my mind. Emulating EKA2 (Epoc Kernel Architecture Ver 2) low level style (LL). But the emulator is HLE... (pssstt).</li>
<li>Everything got started at 22 March of 2018. It was simply a <a href="https://github.com/EKA2L1/EKA2L1/commit/f232b9334a0e10bcecb1ff5a4a4d2e84885c1442">README and license commit</a>.</li>
</ul>
<p>The first real commit start on 27 March. I will takes you through 144 images on the Discord #development channel, which is where I usually mumbles and throws images stuff.</p><figure class="kg-card kg-image-card"><img src="http://localhost:2368/content/images/2019/01/totalimage.png" class="kg-image" alt="EKA2L1 till today (part 1)"></figure><p><strong>6:07, April 17 2018</strong></p>
<p>I wake up early to go and yet I posted this picture before I go.</p>
<p><img src="https://media.discordapp.net/attachments/431430141319708692/435576513329627137/unknown.png?width=841&amp;height=473" alt="EKA2L1 till today (part 1)"></p>
<p>It was showing the SIS installer extracting game files (Super miners, an iDream game), and showing the E32 Image Parser in the work. There was no relocation yet. The emulator is just a dumper at that time.</p>
<p><strong>20:35, April 26 2018</strong></p>
<p>I was digging into Symbian source code and figures out how to do relocation right for ELF-image type. First try on the relocation.</p>
<p><img src="https://media.discordapp.net/attachments/431430141319708692/439051654537674754/unknown.png?width=841&amp;height=473" alt="EKA2L1 till today (part 1)"></p>
<p>It doesn't work right away, but I got really happy about it. I figure it out myself ^_^</p>
<p>The highlight part read wrong value. It should been in ROM address range.</p>
<p><img src="https://media.discordapp.net/attachments/431430141319708692/439058170263109653/unknown.png?width=841&amp;height=473" alt="EKA2L1 till today (part 1)"></p>
<p><strong>21:48 April 30 2018</strong><br>
I got to implement some API functions. I wasn't choosing the route to implement system calls, but instead implement <em>all API</em> calls. I was intended to resolve it by using hash for each function</p>
<p><img src="https://cdn.discordapp.com/attachments/431430141319708692/440343687575109632/unknown.png" alt="EKA2L1 till today (part 1)"></p>
<p>Basiclly, when relocation are applied, I will apply the real address, but when the CPU jumps to that real address, instead I will redirect it to HLE function. Each HLE function has a hash applied to it. It wasn't really smart, but I didn't abadon the whole idea.</p>
<p><strong>14:45 May 1 2018</strong><br>
<img src="https://media.discordapp.net/attachments/431430141319708692/440910139189493760/unknown.png?width=841&amp;height=473" alt="EKA2L1 till today (part 1)"></p>
<p>I wanted to be completely independent from system files in Symbian. Unfortunately, almost every system API involves c++ class and inheritence, which requires vtable. At that point, I decided to do a crazy idea: Rebuild the vtable myself.</p>
<p>That picture is the metadata generator in progress. I was supposed to use it to build a vtable at runtime.</p>
<p><strong>14:45 May 2 2018</strong><br>
<img src="https://media.discordapp.net/attachments/431430141319708692/441143074291187713/unknown.png?width=841&amp;height=473" alt="EKA2L1 till today (part 1)"></p>
<p>The meta generator is finished. UroshUchia reacts with a love. I'm really sorry to disappoint him (sorry!)</p>
<p><strong>21:18 May 7 2018</strong><br>
I showed the vtable generator in progress. It was really simple at that time, detecting virtual and override, and choosing between others. There was no thunk definition in that at the time.</p>
<p>Also, at that time, I switched to Ubuntu 18.04 and Visual Studio Code</p>
<p><img src="https://media.discordapp.net/attachments/431430141319708692/443053923125690368/unknown.png?width=830&amp;height=474" alt="EKA2L1 till today (part 1)"></p>
<p><strong>18:44 May 13 2018</strong><br>
This is where I found out that it also generates RTTI information for each class. My plan screwed up, and I shift to another plan.</p>
<p><img src="https://media.discordapp.net/attachments/431430141319708692/445189705382887426/unknown.png?width=841&amp;height=473" alt="EKA2L1 till today (part 1)"></p>
<p><strong>20:30 May 15 2018</strong><br>
<img src="https://media.discordapp.net/attachments/431430141319708692/445940956181561364/unknown.png?width=486&amp;height=473" alt="EKA2L1 till today (part 1)"></p>
<p>I shifted to another plan, not HLE all the functions. To do that, I need also original system DLLS that come with the ROM, reside in a read-only file system (ROFS).</p>
<p>To make it easier for users, I was asking for an FPSX reader, to let it easier for user, not to dump system files from their phones.</p>
<p><strong>11:52 May 16 2018</strong><br>
<img src="https://media.discordapp.net/attachments/431430141319708692/446172987478245385/unknown.png?width=841&amp;height=473" alt="EKA2L1 till today (part 1)"></p>
<p>This plan was abadoned again, I decide to let user dump the system files in Z drive themself.</p>
<p><strong>20:52 May 18 2018</strong><br>
<img src="https://media.discordapp.net/attachments/431430141319708692/447033909713043466/unknown.png?width=841&amp;height=473" alt="EKA2L1 till today (part 1)"></p>
<p>I begin making the ROM reader. I uses CODERus tool (written is Pascal), comparing with my implementation to make sure nothing goes wrong.</p>
<p><strong>17:20 June 2 2018</strong><br>
I start the work again, this time implement some HLE API calls. I was really happy when the first function was called. It was UserHeap::CreateThreadHeap.</p>
<p>I show that in Discord.</p>
<p><img src="https://media.discordapp.net/attachments/431430141319708692/452416223943065602/unknown.png?width=841&amp;height=474" alt="EKA2L1 till today (part 1)"></p>
<p>The function are used to create heap for the thread. It's one big step at that time, because this is the first function to be called.</p>
<p>Follow up, here is the implementation. Looks really sastifying.</p>
<p><img src="https://media.discordapp.net/attachments/431430141319708692/452432703971655680/unknown.png?width=841&amp;height=474" alt="EKA2L1 till today (part 1)"></p>
<p><strong>10:55 June 4 2018</strong></p>
<p>During IDA reversing, I discovered that the first 0x40 bytes of the stack are used to store thread create parameter. By correcting that, I get the correct create information</p>
<p><img src="https://media.discordapp.net/attachments/431430141319708692/452644647274151936/unknown.png?width=841&amp;height=474" alt="EKA2L1 till today (part 1)"></p>
<p>Eventually, the first thread was created.</p>
<p><strong>20:31 June 7 2018</strong></p>
<p>Hello world!</p>
<p><img src="https://media.discordapp.net/attachments/431430141319708692/454276090643349504/unknown.png" alt="EKA2L1 till today (part 1)"></p>
<p><img src="http://localhost:2368/content/images/2019/01/hal.png" alt="EKA2L1 till today (part 1)"></p>
<p></p><p></p>]]&gt;</encoded></item><item><title></title><description>Hi, This is the new blog. I only have a screenshot.<figure class="kg-card kg-image-card"><img src="http://localhost:2368/content/images/2019/01/unknown--2-.png" class="kg-image"></figure><p>More coming soon. I will keep my update on this website.</p>]]&gt;</description><link>http://localhost:2368/hi-i-have-a-new-blog-system/<guid ispermalink="false">5c3038fcd933a223ecf86da9</guid><creator></creator><pubdate>Sat, 05 Jan 2019 04:59:18 GMT</pubdate><content url="http://localhost:2368/content/images/2019/01/sshot.png" medium="image"></content><encoded><p>Hi, This is the new blog. I only have a screenshot.</p><figure class="kg-card kg-image-card"><img src="http://localhost:2368/content/images/2019/01/unknown--2-.png" class="kg-image" alt="New blog!"></figure><p>More coming soon. I will keep my update on this website.</p>]]&gt;</encoded></item></channel>